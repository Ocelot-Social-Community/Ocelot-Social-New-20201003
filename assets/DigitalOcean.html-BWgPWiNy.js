import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,a as o,b as a,d as i,e as n,f as s,r as d,o as h}from"./app-Blg-8n75.js";const c={};function p(u,e){const t=d("RouteLink");return h(),r("div",null,[e[15]||(e[15]=o(`<h1 id="digitalocean" tabindex="-1"><a class="header-anchor" href="#digitalocean"><span>DigitalOcean</span></a></h1><p>If you want to set up a <a href="https://kubernetes.io" target="_blank" rel="noopener noreferrer">Kubernetes</a> cluster on <a href="https://www.digitalocean.com" target="_blank" rel="noopener noreferrer">DigitalOcean</a>, follow this guide.</p><h2 id="create-account" tabindex="-1"><a class="header-anchor" href="#create-account"><span>Create Account</span></a></h2><p>Create an account with DigitalOcean.</p><h2 id="add-project" tabindex="-1"><a class="header-anchor" href="#add-project"><span>Add Project</span></a></h2><p>On the left side you will see a menu. Click on <code>New Project</code>. Enter a name and click <code>Create Project</code>.<br> Skip moving resources, probably.</p><h2 id="create-kubernetes-cluster" tabindex="-1"><a class="header-anchor" href="#create-kubernetes-cluster"><span>Create Kubernetes Cluster</span></a></h2><p>On the right top you find the button <code>Create</code>. Click on it and choose <code>Kubernetes - Create Kubernetes Cluster</code>.</p><ul><li>use the latest Kubernetes version</li><li>choose your datacenter region</li><li>name your node pool: e.g. <code>pool-&lt;your-network-name&gt;</code></li><li><code>2 Basic nodes</code> with <code>2.5 GB RAM (total of 4 GB)</code>, <code>2 shared CPUs</code>, and <code>80 GB Disk</code> each is optimal for the beginning</li><li>set your cluster name: e.g. <code>cluster-&lt;your-network-name&gt;</code></li><li>select your project</li><li>no tags necessary</li></ul><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>After your cluster is set up – see progress bar above – click on <code>Getting started</code>. Please install the following management tools:</p><ul><li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">kubectl v1.24.1</a></li><li><a href="https://github.com/digitalocean/doctl" target="_blank" rel="noopener noreferrer">doctl v1.78.0</a></li></ul><p>Install the tools as described on the tab or see the links here.</p><p>After the installation, click on <code>Continue</code>.</p><h3 id="download-configuration-file" tabindex="-1"><a class="header-anchor" href="#download-configuration-file"><span>Download Configuration File</span></a></h3><p>Follow the steps to download the configuration file.</p><p>You can skip this step if necessary, as you can download the file later. You can then do this by clicking on <code>Kubernetes</code> in the left menu. In the menu to the right of the cluster name in the cluster list, click on <code>More</code> and select <code>Download Config</code>.</p><h3 id="patch-minor-version-upgrades" tabindex="-1"><a class="header-anchor" href="#patch-minor-version-upgrades"><span>Patch &amp; Minor Version Upgrades</span></a></h3><p>Skip <code>Patch &amp; Minor Version Upgrades</code> for now.</p><h3 id="install-1-click-apps" tabindex="-1"><a class="header-anchor" href="#install-1-click-apps"><span>Install 1-Click Apps</span></a></h3><p>You don&#39;t need a 1-click app. Our helmet script will install the required NGINXs. Therefore, skip this step as well.</p><p>For a 1-click Kubernetes Dashboard or alternatives, follow the next steps.</p><h2 id="install-kubernetes-dashboard" tabindex="-1"><a class="header-anchor" href="#install-kubernetes-dashboard"><span>Install Kubernetes Dashboard</span></a></h2><p>We recommend installing a Kubernetes Dashboard, as DigitalOcean no longer offers a pre-installed dashboard.</p><ul><li>1-click-deployment of <a href="https://marketplace.digitalocean.com/apps/kubernetes-dashboard" target="_blank" rel="noopener noreferrer">Kubernetes Dashboard on DigitalOcean marketplace</a></li></ul><p>There you will also find a section entitled <code>Getting Started</code>, which describes how you can log in from your local computer.</p><p>Very short description:</p><h3 id="in-your-digitalocean-account" tabindex="-1"><a class="header-anchor" href="#in-your-digitalocean-account"><span>In your DigitalOcean Account</span></a></h3><p>For authentication, download the current cluster configuration file from DigitalOcean.</p><h3 id="in-terminal" tabindex="-1"><a class="header-anchor" href="#in-terminal"><span>In Terminal</span></a></h3><p>Set the context of the cluster by command:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use-context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">context-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We seem to have two instances in our DigitalOcean cluster how we need to log into the Kubernetes Dashboard. It looks like it depends on the Kubernetes Dashboard version, but we are not absolutely sure.</p><h4 id="login-with-kubeconfig-file" tabindex="-1"><a class="header-anchor" href="#login-with-kubeconfig-file"><span>Login with <code>kubeconfig</code> File</span></a></h4><p>Port-forward the Kubernetes Dashboard to your local machine:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># save pod name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> export</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> POD_NAME=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pods</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes-dashboard</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;app.kubernetes.io/name=kubernetes-dashboard,app.kubernetes.io/instance=kubernetes-dashboard&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> jsonpath=&quot;{.items[0].metadata.name}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># forward port</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubectl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes-dashboard</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port-forward</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $POD_NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8443:8443</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Access the URL in your local web browser at <code>https://127.0.0.1:8443/</code>, and log in using your Kubernetes cluster credentials – downloaded config file. You may encounter a certificate warning, so make sure to override it.</p><h4 id="login-with-admin-token" tabindex="-1"><a class="header-anchor" href="#login-with-admin-token"><span>Login with Admin Token</span></a></h4><p>Port-forward the Kubernetes Dashboard to your local machine:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># create your access token</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes-dashboard</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> token</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> admin-user</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># forward port</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubernetes-dashboard</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port-forward</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> svc/kubernetes-dashboard-kong-proxy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8443:443</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Access the URL in your local web browser at <code>https://127.0.0.1:8443/</code>, and log in using your access token. You may encounter a certificate warning, so make sure to override it.</p><h2 id="alternatives-to-kubernetes-dashboard" tabindex="-1"><a class="header-anchor" href="#alternatives-to-kubernetes-dashboard"><span>Alternatives to Kubernetes Dashboard</span></a></h2><p>DigitalOcean has a website about Kubernetes Dashboard and alternatives:</p><ul><li><a href="https://www.digitalocean.com/community/conceptual-articles/kubernetes-visualization-tools?mkt_tok=MTEzLURUTi0yNjYAAAGQ0YS-wbZaWn5th-m86-fM7vgiLvxNipWpAsUrgd2z4YgiMB0aRgCIDYEiC0Y2c0H9tBsICZQ5ORKgssOgeSjOKSEfN3i7xUpzqXbdZiYxNL2Q" target="_blank" rel="noopener noreferrer">https://www.digitalocean.com/community/conceptual-articles/kubernetes-visualization-tools?mkt_tok=MTEzLURUTi0yNjYAAAGQ0YS-wbZaWn5th-m86-fM7vgiLvxNipWpAsUrgd2z4YgiMB0aRgCIDYEiC0Y2c0H9tBsICZQ5ORKgssOgeSjOKSEfN3i7xUpzqXbdZiYxNL2Q</a></li></ul><h2 id="dns-configuration" tabindex="-1"><a class="header-anchor" href="#dns-configuration"><span>DNS Configuration</span></a></h2><p>There are the following two ways to set up the DNS.</p><h3 id="manage-dns-with-a-different-domain-provider" tabindex="-1"><a class="header-anchor" href="#manage-dns-with-a-different-domain-provider"><span>Manage DNS With A Different Domain Provider</span></a></h3><p>If you have registered your domain or subdomain with another domain provider, add an <code>A</code> record there with one of the IP addresses from one of the cluster droplets in the DNS.</p><p>To find the correct IP address to set in the DNS <code>A</code> record, click <code>Droplets</code> in the left main menu. A list of all your droplets will be displayed. Take one of the IPs of perhaps two or more droplets in your cluster from the list and enter it into the <code>A</code> record.</p><h3 id="manage-dns-with-digitalocean" tabindex="-1"><a class="header-anchor" href="#manage-dns-with-digitalocean"><span>Manage DNS With DigitalOcean</span></a></h3><p><em><strong>TODO:</strong> How to configure the DigitalOcean DNS management service …</em></p><p>To understand what makes sense to do when managing your DNS with DigitalOcean, you need to know how DNS works:</p>`,52)),a("p",null,[e[1]||(e[1]=i("DNS means ")),e[2]||(e[2]=a("code",null,"Domain Name System",-1)),e[3]||(e[3]=i(". It resolves domains like ")),e[4]||(e[4]=a("code",null,"example.com",-1)),e[5]||(e[5]=i(" into an IP like ")),e[6]||(e[6]=a("code",null,"123.123.123.123",-1)),e[7]||(e[7]=i(". DigitalOcean is not a domain registrar, but provides a DNS management service. If you use DigitalOcean's DNS management service, you can configure ")),n(t,{to:"/deployment/src/kubernetes/#dns"},{default:s(()=>e[0]||(e[0]=[i("your cluster")])),_:1}),e[8]||(e[8]=i(" to always resolve the domain to the correct IP and automatically update it for that. The IPs of the DigitalOcean machines are not necessarily stable, so the cluster's DNS service will update the DNS records managed by DigitalOcean to the new IP as needed."))]),e[16]||(e[16]=a("p",null,[a("em",null,[a("strong",null,"CAUTION:"),i(" If you are using an external DNS, you currently have to do this manually, which can cause downtime.")])],-1)),e[17]||(e[17]=a("h2",{id:"deploy",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#deploy"},[a("span",null,"Deploy")])],-1)),a("p",null,[e[10]||(e[10]=i("Yeah, you're done here. Back to ")),n(t,{to:"/deployment/src/kubernetes/"},{default:s(()=>e[9]||(e[9]=[i("Deployment with Helm for Kubernetes")])),_:1}),e[11]||(e[11]=i("."))]),e[18]||(e[18]=a("h2",{id:"backups-on-digitalocean",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#backups-on-digitalocean"},[a("span",null,"Backups On DigitalOcean")])],-1)),a("p",null,[e[13]||(e[13]=i("You can and should do ")),n(t,{to:"/deployment/src/kubernetes/Backup.html"},{default:s(()=>e[12]||(e[12]=[i("backups")])),_:1}),e[14]||(e[14]=i(" with Kubernetes for sure."))]),e[19]||(e[19]=a("p",null,"Additional to backup and copying the Neo4j database dump and the backend images you can do a volume snapshot on DigitalOcean at the moment you have the database in sleep mode.",-1))])}const b=l(c,[["render",p],["__file","DigitalOcean.html.vue"]]),m=JSON.parse('{"path":"/deployment/src/kubernetes/DigitalOcean.html","title":"DigitalOcean","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Create Account","slug":"create-account","link":"#create-account","children":[]},{"level":2,"title":"Add Project","slug":"add-project","link":"#add-project","children":[]},{"level":2,"title":"Create Kubernetes Cluster","slug":"create-kubernetes-cluster","link":"#create-kubernetes-cluster","children":[]},{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[{"level":3,"title":"Download Configuration File","slug":"download-configuration-file","link":"#download-configuration-file","children":[]},{"level":3,"title":"Patch & Minor Version Upgrades","slug":"patch-minor-version-upgrades","link":"#patch-minor-version-upgrades","children":[]},{"level":3,"title":"Install 1-Click Apps","slug":"install-1-click-apps","link":"#install-1-click-apps","children":[]}]},{"level":2,"title":"Install Kubernetes Dashboard","slug":"install-kubernetes-dashboard","link":"#install-kubernetes-dashboard","children":[{"level":3,"title":"In your DigitalOcean Account","slug":"in-your-digitalocean-account","link":"#in-your-digitalocean-account","children":[]},{"level":3,"title":"In Terminal","slug":"in-terminal","link":"#in-terminal","children":[]}]},{"level":2,"title":"Alternatives to Kubernetes Dashboard","slug":"alternatives-to-kubernetes-dashboard","link":"#alternatives-to-kubernetes-dashboard","children":[]},{"level":2,"title":"DNS Configuration","slug":"dns-configuration","link":"#dns-configuration","children":[{"level":3,"title":"Manage DNS With A Different Domain Provider","slug":"manage-dns-with-a-different-domain-provider","link":"#manage-dns-with-a-different-domain-provider","children":[]},{"level":3,"title":"Manage DNS With DigitalOcean","slug":"manage-dns-with-digitalocean","link":"#manage-dns-with-digitalocean","children":[]}]},{"level":2,"title":"Deploy","slug":"deploy","link":"#deploy","children":[]},{"level":2,"title":"Backups On DigitalOcean","slug":"backups-on-digitalocean","link":"#backups-on-digitalocean","children":[]}],"git":{"createdTime":1736228730000,"updatedTime":1736228730000,"contributors":[{"name":"Ulf Gebhardt","email":"ulf.gebhardt@webcraft-media.de","commits":1}]},"readingTime":{"minutes":2.99,"words":897},"filePathRelative":"deployment/src/kubernetes/DigitalOcean.md","localizedDate":"January 7, 2025","excerpt":"\\n<p>If you want to set up a <a href=\\"https://kubernetes.io\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Kubernetes</a> cluster on <a href=\\"https://www.digitalocean.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">DigitalOcean</a>, follow this guide.</p>\\n<h2>Create Account</h2>\\n<p>Create an account with DigitalOcean.</p>"}');export{b as comp,m as data};
